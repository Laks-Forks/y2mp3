env:
  global:
    secure: bMkuB4hgv7IpZUFg2tL77NP3ea+jv0v/VrioLEY1DP3CCGmpleDI5mIcmBBMlkhXPS5fRDg+SgrVY7rYrPHXbuvvG28yvN2CjNFsUx0V5CjxYoKebP8XInJfXM1nq//kAZi7K04VVy002Q40uFqqojLCr6msB2yG2ra+wkeT0z9oKx5BneL/UAtaRCxvmrYV5hq9LADhi7dyJ8lrmnZmaNi7O2gzGbV8VZEH+7meiPxPGtXhVFDWXa7S9By1hq/DteN5wnrD73METlpzvmCMEH+rtBWHT3a7suHjaPL77+gqfSUq8VMdSwQnpJjsJvPfAN/rl66TIW6zRPc37IM2zJKWSSTj7Sn5rhdYr5cVA4YU7lUUEUWXm/+A29v5cMBVAi7/sZ4Ud2TaawAScg/xv9+wTr7EeRk7HL0Oy0uQQjBd7qP+4NASwWh9/EpNciII7Zjnf9yjESjJtjjrFRaT6+VlVmzRZ4FdlaieDTwwjXYg+yFy5MtBpunSZym/8AgBSjLLwvrjooKImf2gzGdgwq4ixO42bwfcLj3WvtjU2VjIor1HRamoopc3t3DzU+JpsREliQQZ/SeKYlFOx4jpQIzy00e77E/qixFmTzebRP0jxqGginl5WruQXPsKQJ2mGnZde9aS958TOLdJMoBsLfEI/QuBJMHEppWEkW6bfTo=
matrix:
  include:
  - os: osx
    osx_image: xcode9.4
    language: node_js
    node_js: '10'
    env:
    - ELECTRON_CACHE=$HOME/.cache/electron
    - ELECTRON_BUILDER_CACHE=$HOME/.cache/electron-builder
cache:
  directories:
  - node_modules
  - "$HOME/.cache/electron"
  - "$HOME/.cache/electron-builder"
before_install:
- composer config --global github-oauth.github.com "$GITHUB_TOKEN"
install:
- npm install
- npm run generate-icons
script:
- |
  if [ "$TRAVIS_OS_NAME" == "linux" ]; then
    docker run --rm \
      --env-file <(env | grep -iE 'DEBUG|NODE_|ELECTRON_|YARN_|NPM_|CI|CIRCLE|TRAVIS|APPVEYOR_|CSC_|_TOKEN|_KEY|AWS_|STRIP|BUILD_') \
      -v ${PWD}:/project \
      -v ~/.cache/electron:/root/.cache/electron \
      -v ~/.cache/electron-builder:/root/.cache/electron-builder \
      electronuserland/builder:wine \
      /bin/bash -c "npm run dist"
  else
    npm run dist
  fi
before_cache:
- rm -rf $HOME/.cache/electron-builder/wine
branches:
  except:
  - "/^v\\d+\\.\\d+\\.\\d+$/"
deploy:
  provider: releases
  api_key:
    secure: T4b0TJa2K6Aa8Svr0pQ+WDdegE41u8y+QZo1DyEeIKBJ/8Fh8Yi7m/ZcNCYG7eETttQDWW6sMVtGfgzrgOwqrMVHXQcsssX2quZ39mtzgW9BKzTZsm0GlfdKbe6w0jaO0Al8qk5ZZH9Gz3U/SvziOfJ7FzlnQLIL0MFHI0DdvuSHXweG94ZxynmvmBoZPojao4LKNPo/rM8ZXGGJ2ll3gfyxB/4jmcklUyS/q43RI7ZL7jTOr00KH5rZoIdIj6KdAJWCXD41QWn8bOOsNY96frnR3DgeP1hkCFK+WtDCLqyWHL8EyYeJqtYGKO5rvpELJz3DFV9c96jRJF9ZPWhVE3+QVtoLaJuYsPDc00gs4X5Ok3PM3N2s+YHKWBDJM1DOV5XrWYXq0C7GVcO5SQSTKrWemt2Voxe8PHF63vt9NpktcbdY+0WzYqWlqpYZQZkD8niizwd16Qc2MOKqtm/vruYxNYha/7FfbWzgPxPIUVqD0FUPjtl5e+iRx91e5IfGdTgYIYFY7YdUCE3zGJh8Ic4q5ruBRpS5tFK/jk7BBHB1L+NxcPwQBwQhV76cXEeovEkmlbRvRWUasNDXQvdEEbKMxRQhFhudJZkFxXY2xJDwfPiZXxZCuggtmNwc7Kwq2C4hXY9JzTdGv4h5Bw+562c3T8hqXAPNE3Q7QZ4hZyg=
  file: Download Youtube Playlist Setup*.dmg
  on:
    repo: moshfeu/download-youtube-playlist
